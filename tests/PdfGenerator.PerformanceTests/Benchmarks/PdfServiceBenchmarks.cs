using BenchmarkDotNet.Attributes;
using PdfGenerator.Infrastructure;

namespace PdfGenerator.PerformanceTests.Benchmarks;

public class PdfServiceBenchmarks
{
    [Benchmark]
    public async Task GenerateSimplePdfDocument()
    {
        string htmlContent = """
                        <!DOCTYPE html>
            <html lang="en">
              <head>
                <meta charset="UTF-8" />
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <title>PDF Generator Test Page</title>
                <style>
                  body {
                    font-family: Arial, sans-serif;
                    line-height: 1.6;
                  }

                  h1 {
                    color: #333;
                    text-align: center;
                  }

                  .content {
                    margin: 20px;
                  }

                  .section {
                    border: 1px solid #ccc;
                    padding: 15px;
                    margin-bottom: 15px;
                  }

                  .footer {
                    text-align: center;
                    margin-top: 20px;
                    font-size: 0.9em;
                    color: #555;
                  }
                </style>
              </head>
              <body>
                <h1>PDF Generator Test</h1>

                <div class="content">
                  <div class="section">
                    <h2>Introduction</h2>
                    <p>
                      This is a sample HTML page designed to test the functionality of a PDF
                      generator. The content here includes headings, paragraphs, and simple
                      styling.
                    </p>
                  </div>

                  <div class="section">
                    <h2>Sample Data</h2>
                    <ul>
                      <li>Item 1: Description of item 1.</li>
                      <li>Item 2: Description of item 2.</li>
                      <li>Item 3: Description of item 3.</li>
                    </ul>
                  </div>

                  <div class="section">
                    <h2>Table Example</h2>
                    <table border="1" width="100%" cellpadding="5" cellspacing="0">
                      <tr>
                        <th>Name</th>
                        <th>Age</th>
                        <th>Occupation</th>
                      </tr>
                      <tr>
                        <td>John Doe</td>
                        <td>30</td>
                        <td>Engineer</td>
                      </tr>
                      <tr>
                        <td>Jane Smith</td>
                        <td>25</td>
                        <td>Designer</td>
                      </tr>
                    </table>
                  </div>
                </div>

                <div class="footer">
                  <p>Generated by PDF Generator Test Page.</p>
                </div>
              </body>
            </html>
            """;
        var pdfService = new PdfService();
        _ = await pdfService.GenerateAsync(htmlContent, 300);
    }

    [Benchmark]
    public async Task GenerateComplexPdfDocument()
    {
        var htmlContent = """
                        <!DOCTYPE html>
            <html lang="en">
              <head>
                <meta charset="UTF-8" />
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <title>Complex PDF Test Page</title>
                <style>
                  /* Basic Reset */
                  * {
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                  }

                  body {
                    font-family: "Arial", sans-serif;
                    line-height: 1.6;
                    color: #333;
                    background-color: #f4f4f4;
                    padding: 20px;
                  }

                  /* Header */
                  .header {
                    text-align: center;
                    padding: 20px;
                    background-color: #333;
                    color: #fff;
                  }

                  .header h1 {
                    font-size: 2.5em;
                    margin-bottom: 10px;
                  }

                  .header p {
                    font-size: 1.1em;
                    margin-top: 0.5em;
                  }

                  /* Navigation */
                  .nav {
                    display: flex;
                    justify-content: center;
                    padding: 10px;
                    background-color: #555;
                    color: #fff;
                  }

                  .nav a {
                    color: #fff;
                    padding: 0 15px;
                    text-decoration: none;
                  }

                  .nav a:hover {
                    text-decoration: underline;
                  }

                  /* Main content */
                  .content {
                    padding: 20px;
                    background-color: #fff;
                    margin-top: 20px;
                    border-radius: 5px;
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                  }

                  /* Section Styling */
                  .section {
                    margin-bottom: 20px;
                  }

                  .section h2 {
                    font-size: 2em;
                    border-bottom: 2px solid #333;
                    padding-bottom: 10px;
                    margin-bottom: 10px;
                  }

                  .section p {
                    font-size: 1.1em;
                    margin-top: 10px;
                    margin-bottom: 10px;
                    line-height: 1.8;
                    text-align: justify;
                  }

                  /* Grid Layout for Data Display */
                  .grid {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 20px;
                  }

                  .grid-item {
                    flex: 1 1 calc(33.333% - 20px);
                    padding: 15px;
                    background-color: #eee;
                    border: 1px solid #ddd;
                    border-radius: 5px;
                    text-align: center;
                  }

                  /* Table Styling */
                  table {
                    width: 100%;
                    border-collapse: collapse;
                    margin: 20px 0;
                    font-size: 1em;
                  }

                  table th,
                  table td {
                    padding: 12px;
                    border: 1px solid #ddd;
                    text-align: left;
                  }

                  table th {
                    background-color: #333;
                    color: #fff;
                  }

                  /* Footer */
                  .footer {
                    text-align: center;
                    padding: 10px;
                    background-color: #333;
                    color: #fff;
                    margin-top: 20px;
                    font-size: 0.9em;
                  }

                  /* Media Queries */
                  @media (max-width: 768px) {
                    .grid-item {
                      flex: 1 1 calc(50% - 20px);
                    }
                  }

                  @media (max-width: 576px) {
                    .grid-item {
                      flex: 1 1 100%;
                    }
                  }
                </style>
              </head>
              <body>
                <header class="header">
                  <h1>Complex PDF Test Document</h1>
                  <p>An advanced HTML document to test PDF generator functionality</p>
                </header>

                <nav class="nav">
                  <a href="#introduction">Introduction</a>
                  <a href="#data-section">Data Section</a>
                  <a href="#detailed-table">Detailed Table</a>
                  <a href="#conclusion">Conclusion</a>
                </nav>

                <main class="content">
                  <section id="introduction" class="section">
                    <h2>Introduction</h2>
                    <p>
                      This document contains multiple sections, styled components, tables,
                      and other HTML elements to test complex rendering by a PDF generator.
                      Each section is designed to verify that the generator accurately
                      processes HTML and CSS content, including layout, typography, and
                      media queries.
                    </p>
                    <p>
                      Testing areas include multi-column layouts, styled tables, and
                      responsive grid sections.
                    </p>
                  </section>

                  <section id="data-section" class="section">
                    <h2>Data Section</h2>
                    <div class="grid">
                      <div class="grid-item">
                        <h3>Item 1</h3>
                        <p>Details about item 1 in a boxed layout for testing purposes.</p>
                      </div>
                      <div class="grid-item">
                        <h3>Item 2</h3>
                        <p>Details about item 2 with additional information.</p>
                      </div>
                      <div class="grid-item">
                        <h3>Item 3</h3>
                        <p>Testing layout for grid items with detailed content.</p>
                      </div>
                      <div class="grid-item">
                        <h3>Item 4</h3>
                        <p>Additional item for layout expansion testing.</p>
                      </div>
                      <div class="grid-item">
                        <h3>Item 5</h3>
                        <p>Another item with example content for testing grids.</p>
                      </div>
                    </div>
                  </section>

                  <section id="detailed-table" class="section">
                    <h2>Detailed Table</h2>
                    <table>
                      <tr>
                        <th>Product</th>
                        <th>Category</th>
                        <th>Price</th>
                        <th>Stock</th>
                      </tr>
                      <tr>
                        <td>Product 1</td>
                        <td>Electronics</td>
                        <td>$299</td>
                        <td>In Stock</td>
                      </tr>
                      <tr>
                        <td>Product 2</td>
                        <td>Appliances</td>
                        <td>$199</td>
                        <td>Out of Stock</td>
                      </tr>
                      <tr>
                        <td>Product 3</td>
                        <td>Furniture</td>
                        <td>$99</td>
                        <td>In Stock</td>
                      </tr>
                      <tr>
                        <td>Product 4</td>
                        <td>Clothing</td>
                        <td>$49</td>
                        <td>Limited Stock</td>
                      </tr>
                    </table>
                  </section>

                  <section id="conclusion" class="section">
                    <h2>Conclusion</h2>
                    <p>
                      This test document demonstrates a range of HTML and CSS elements and
                      layouts to test the capabilities of PDF generation tools. By
                      simulating a realistic document structure, the test helps verify the
                      accuracy of converted elements in the final PDF output.
                    </p>
                  </section>
                </main>

                <footer class="footer">
                  <p>Complex PDF Test Document - &copy; 2024 PDF Generator Testing Inc.</p>
                </footer>
              </body>
            </html>
            """;
        var pdfService = new PdfService();
        _ = await pdfService.GenerateAsync(htmlContent, 300);
    }
}